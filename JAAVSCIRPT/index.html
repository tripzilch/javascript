<!DOCTYPE html>
<html>
<head>
    <title>Snake</title>
    <meta charset="utf-8" />
    <style>
        * { margin: 0; padding: 0; }
        body { background: #000; }
        canvas { margin: 20px; border: 1px solid #0f0; background: #686868; }
        
    </style>
    <script type="text/javascript">
            var frame_count = 0;
        window.addEventListener('load', function (ev) {            
            //Canvas
	        var canvas = document.getElementById("canvas");
	        var ctx = canvas.getContext('2d');
	        var width = canvas.width;
	        var height = canvas.height;
	
	        //Sprite Snake
	        var im = document.getElementById("blok");
            	
        	var x = Math.floor(Math.random() * 25);
        	var y = Math.floor(Math.random() * 20);
            var dx = 0;
            var dy = 0;
        	
        	ctx.fillRect(0,0,width,height);
        	        	
        	function step() {
        	    frame_count += 1;
        	    ctx.drawImage(im,x * 32,y * 32);
        	    if (frame_count % 10 == 0) {
        	        x = x + dx;
        	        y = y + dy;
    	        }
        	}
        	
        	setInterval(step, 1000 / 30);

            var key = false;
            document.addEventListener('keydown', function(ev) {
                key = ev.which;
                if (key == 87) { dy = -1; dx = 0 }
                if (key == 65) { dx = -1; dy = 0 }        
                if (key == 83) { dy = +1; dx = 0 }
                if (key == 68) { dx = +1; dy = 0 }
            }, false);
                       		        
        }, false);
    </script>
</head>

<body>
    <canvas id="canvas" width="800" height="640"></canvas>
    <img src="blok2.png" id="blok" class="sprite" />
</body>

</html>
